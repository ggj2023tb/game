<!DOCTYPE html>
<html>
<head>
    <script
            src="https://code.jquery.com/jquery-3.6.3.min.js"
            integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
            crossorigin="anonymous"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="css/styles.css" rel="stylesheet" />
</head>
<body>
    <div class="container">
        <input class="btn btn-primary" type="button" id="createGame" value="Create game" />
        <input class="btn btn-primary" type="button" id="joinGame" value="Join game" />
        <input class="btn btn-primary" type="button" id="startGame" value="Start game" />
        <input class="btn btn-primary" type="button" id="sendQuestion" value="Send question" />
        <div id="question"></div>
        <div class="canvas"></div>
    </div>


    <script>
        const socket = new WebSocket('ws://localhost:9000');

        $('#createGame').click(function () {
            socket.send(JSON.stringify({ "type": "createGame", "name": "domi game" }));
        });

        $('#joinGame').click(function () {
            socket.send(JSON.stringify({ "type": "joinGame", "roomId": 123, "playerId": 123 }));
        });

        $('#startGame').click(function () {
            socket.send(JSON.stringify({ "type": "startGame" }));
        });
        $('#sendQuestion').click(function () {
            socket.send(JSON.stringify({ "type": "sendQuestion" }));
        });

        socket.addEventListener('message', (event) => {
            data = JSON.parse(event.data)

            if (data.type == 'addPlayer') {
                $('.canvas').append(
                    '<div class="tree" style="padding-right: 250px;"><div class="trunk"></div></div>'
                )
            }

            if (data.type == 'question') {
                let html = data.msg;

                for (option in data.options) {
                    html += '<input class="btn btn-primary" type="button" value="'+data.options[option]+'"/>';
                }

                $('#question').html(html);
            }
        });
    </script>
</body>
</html>